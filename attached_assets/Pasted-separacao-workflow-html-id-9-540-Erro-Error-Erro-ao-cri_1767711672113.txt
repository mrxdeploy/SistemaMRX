separacao-workflow.html?id=9:540 Erro: Error: Erro ao criar sublote: (psycopg2.errors.NotNullViolation) null value in column "tipo_lote_id" of relation "lotes" violates not-null constraint
DETAIL:  Failing row contains (75, 2026-00005, 19, null, null, null, null, null, null, null, 333, 0, 1, null, null, A, CRIADO_SEPARACAO, null, null, f, null, null, null, f, null, null, null, null, null, null, null, null, 2026-01-06 14:59:43.852688, null, null, null, [], [], , [{"acao": "SUBLOTE_CRIADO_NA_SEPARACAO", "usuario_id": "1", "tim..., 70, null, null, null).

[SQL: INSERT INTO lotes (numero_lote, fornecedor_id, tipo_lote_id, solicitacao_origem_id, oc_id, os_id, conferencia_id, peso_bruto_recebido, peso_liquido, peso_total_kg, valor_total, quantidade_itens, estrelas_media, classificacao_predominante, qualidade_recebida, status, tipo_retirada, localizacao_atual, reservado, reservado_para, reservado_por_id, reservado_em, bloqueado, tipo_bloqueio, bloqueado_por_id, bloqueado_em, motivo_bloqueio, ip_inicio, device_id, data_criacao, data_fechamento, data_aprovacao, conferente_id, anexos, divergencias, observacoes, auditoria, lote_pai_id) VALUES (%(numero_lote)s, %(fornecedor_id)s, %(tipo_lote_id)s, %(solicitacao_origem_id)s, %(oc_id)s, %(os_id)s, %(conferencia_id)s, %(peso_bruto_recebido)s, %(peso_liquido)s, %(peso_total_kg)s, %(valor_total)s, %(quantidade_itens)s, %(estrelas_media)s, %(classificacao_predominante)s, %(qualidade_recebida)s, %(status)s, %(tipo_retirada)s, %(localizacao_atual)s, %(reservado)s, %(reservado_para)s, %(reservado_por_id)s, %(reservado_em)s, %(bloqueado)s, %(tipo_bloqueio)s, %(bloqueado_por_id)s, %(bloqueado_em)s, %(motivo_bloqueio)s, %(ip_inicio)s, %(device_id)s, %(data_criacao)s, %(data_fechamento)s, %(data_aprovacao)s, %(conferente_id)s, %(anexos)s::JSON, %(divergencias)s::JSON, %(observacoes)s, %(auditoria)s::JSON, %(lote_pai_id)s) RETURNING lotes.id]
[parameters: {'numero_lote': '2026-00005', 'fornecedor_id': 19, 'tipo_lote_id': None, 'solicitacao_origem_id': None, 'oc_id': None, 'os_id': None, 'conferencia_id': None, 'peso_bruto_recebido': None, 'peso_liquido': None, 'peso_total_kg': 333.0, 'valor_total': 0.0, 'quantidade_itens': 1, 'estrelas_media': None, 'classificacao_predominante': None, 'qualidade_recebida': 'A', 'status': 'CRIADO_SEPARACAO', 'tipo_retirada': None, 'localizacao_atual': None, 'reservado': False, 'reservado_para': None, 'reservado_por_id': None, 'reservado_em': None, 'bloqueado': False, 'tipo_bloqueio': None, 'bloqueado_por_id': None, 'bloqueado_em': None, 'motivo_bloqueio': None, 'ip_inicio': None, 'device_id': None, 'data_criacao': datetime.datetime(2026, 1, 6, 14, 59, 43, 852688), 'data_fechamento': None, 'data_aprovacao': None, 'conferente_id': None, 'anexos': '[]', 'divergencias': '[]', 'observacoes': '', 'auditoria': '[{"acao": "SUBLOTE_CRIADO_NA_SEPARACAO", "usuario_id": "1", "timestamp": "2026-01-06T14:59:43.852647", "ip": "100.64.0.2", "user_agent": "Mozilla/5.0 ... (193 characters truncated) ... HTML, like Gecko) Chrome/143.0.0.0 Safari/537.36", "separacao_id": 9, "lote_pai_id": 70, "lote_pai_numero": "2025-00040", "valor_proporcional": 0.0}]', 'lote_pai_id': 70}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
    at HTMLFormElement.<anonymous> (separacao-workflow.html?id=9:522:27)